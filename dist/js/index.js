"use strict";function loaderCompleted(){$(".panel").one("webkitAnimationEnd animationEnd",function(){$(".panel-wrapper").tap(function(){$(this).addClass("hide")})}),$(".btn-play").on("touchend",function(){var e=document.querySelector(".video");$(".replay-tips,.btn-play").hide(),e.currentTime=0,e.play(),e.webkitRequestFullscreen(),e.play()}),$(".video").on("webkitfullscreenchange",function(){if(null==document.webkitFullscreenElement){var e=document.querySelector(".video");e.currentTime=0,e.pause(),$(".replay-tips,.btn-play").show()}}),$(".islider").on("touchend",function(e){e.stopPropagation()}),$(".bg").on("webkitTransitionEnd transitionEnd",function(){$(this).parent().find(".btn").addClass("show")}),$(".showPic").tap(function(){showPic($(this).data("src"))}),$(".btnCart").tap(function(){showLink($(this).data("src"),$(this).data("link"),$(this).data("item"))}),$("#page5 .btnM1").tap(function(){showSlider({pics:["../img/p5-detail3-1.png","../img/p5-detail3-2.jpg"],width:"14.025rem",height:"13.175rem",animateType:"fade"})}),$("#page5 .btnM2").tap(function(){showSlider({pics:["../img/p5-detail1-2.jpg","../img/p5-detail1-1.jpg"],width:"14.025rem",height:"17.925rem",animateType:"fade"})}),$("#page5 .btnM3").tap(function(){showSlider({bg:"../img/p5-detail2-w.png",pics:["../img/p5-detail2-1.jpg","../img/p5-detail2-2.jpg","../img/p5-detail2-3.jpg"],width:"13.3rem",height:"8.45rem",top:"0.3625rem",left:"0.3625rem",animateType:"default",dot:!0})}),$("#page7 .btnM1").on("touchstart",function(){showSlider({pics:["../img/p7-detail1.jpg","../img/p7-detail2.jpg"],width:"14.025rem",height:"10.35rem",animateType:"default",dot:!0,dotBottom:"1.4rem"})}),$("#page7 .sharePage").on("touchend",function(e){e.stopPropagation(),$(this).removeClass("show")}).on("swipeDown",function(e){e.stopPropagation(),$(this).removeClass("show")})}function snowFlow(e){$(".snow-box").remove();var i=window.innerWidth,t=window.innerHeight,n=document.createElement("div"),a="",r="",o={opacity:[],size:[],x:[],y:[],img:[],rotate:[]},s=0,d=0,l=0;n.classList.add("snow-box");for(var p=0;p<parseInt(e.num||18);p+=1)r="",o.opacity[p]=.5+.5*Math.random(),o.size[p]=20+30*Math.random(),o.x[p]=parseInt(i*Math.random()),o.y[p]=80*-p,o.rotate[p]=Math.floor(360*Math.random()),o.img[p]=e.url,r="position:absolute;top:0;",r+="opacity:"+o.opacity[p]+";",r+="width:"+o.size[p]+"px;",r+="-webkit-transform:translate3d("+o.x[p]+"px,"+o.y[p]+"px, 0);",r+="transform:translate3d("+o.x[p]+"px,"+o.y[p]+"px, 0);",a+="<img src="+o.img[p]+" class='snow' style='"+r+"' />";n.innerHTML=a,$("#view").append(n);var c=$(".snow");_t=setInterval(function(){c.each(function(e,n){(o.y[e]>t||o.x[e]<-50||o.x[e]>i+50)&&(o.y[e]=-100,o.x[e]=parseInt(i*Math.random())),s=e%2?-.2:.2,d=e%2?.7:.9,l=e%2?.2:-.4,o.x[e]+=s,o.y[e]+=d,o.rotate[e]+=l,$(n).css({"-webkit-transform":"translate3d("+o.x[e]+"px,"+o.y[e]+"px, 0) rotate("+o.rotate[e]+"deg)",transform:"translate3d("+o.x[e]+"px,"+o.y[e]+"px, 0) rotate("+o.rotate[e]+"deg)"})})},1e3/60)}function showPic(e){var i=new Image,t=$("#showDiv"),n=$("#showDiv>.showImg");i.onload=function(){var i=this.width/40,a=this.height/40;n.css({"background-image":"url("+e+")","background-size":i+"rem "+a+"rem",width:i+"rem",height:a+"rem"}),t.addClass("show")},i.src=e}function showLink(e,i,t){var n=new Image,a=$("#showLink"),r=$("#showLink>.showImg");n.onload=function(){var n=this.width/40,o=this.height/40;r.css({"background-image":"url("+e+")","background-size":n+"rem "+o+"rem",width:n+"rem",height:o+"rem"}),r.children("img").attr("src",e),a.addClass("show"),$("#btnBuy").tap(function(){_czc.push(["_trackEvent",t+"点击购买按钮",1]),setTimeout(function(){window.location.href=i},100)})},n.src=e}function showSlider(e){var i=new Image;document.querySelector(".inner-islider").innerHTML="";var t=$("#showSlider"),n=$("#showSlider>.showImg");if(i.onload=function(){var i=this.width/40,a=this.height/40;n.css({"background-image":"url("+e.bg+")","background-size":i+"rem "+a+"rem",width:i+"rem",height:a+"rem"}),$(".inner-islider").css({width:e.width,height:e.height,left:e.left,top:e.top});var r={dom:document.querySelector(".inner-islider"),dotColor:e.dot?{main:"#eb5b36",others:"#fff"}:null,data:e.pics.map(function(e,i){return{content:e}}),animateType:e.animateType,isAutoplay:!e.dot,duration:2e3,useTime:600,timingFn:"ease",isDebug:!1,isLooping:!0,isVertical:!1,isOverspread:!1};innerSlider=new iSlider(r),t.addClass("show"),innerSlider.play()},e.bg)i.src=e.bg;else{n.css({"background-image":"url("+e.bg+")","background-size":e.width+" "+e.height,width:e.width,height:e.height}),$(".inner-islider").css({width:e.width,height:e.height,left:e.left,top:e.top});var a={dom:document.querySelector(".inner-islider"),dotColor:e.dot?{main:"#eb5b36",others:"#fff"}:null,data:e.pics.map(function(e,i){return{content:e}}),animateType:e.animateType,isAutoplay:!e.dot,duration:2e3,useTime:600,timingFn:"ease",isDebug:!1,isLooping:!0,isVertical:!1,isOverspread:!1};innerSlider=new iSlider(a),t.addClass("show"),innerSlider.play(),e.dotBottom&&$(".inner-islider>.islider-dot-wrap").css("bottom",e.dotBottom)}}var innerIndex=0,_t=null,p3Islider1,p3Islider2,p5Islider2,p7Islider1,p7Islider2=null;new PageSlider({pages:$(".page-wrap .page"),dev:!1,onSwipeUp:function(){switch(this.index){case 0:var e=this.curPage;if(0==innerIndex)e.find(".text1").addClass("show"),innerIndex++;else if(1==innerIndex)e.find(".text1").removeClass("show"),e.find(".text2").addClass("show"),innerIndex++;else if(2==innerIndex){innerIndex++,e.data("lock-next",!1);var i=document.querySelector(".video");e.find(".text2").removeClass("show"),e.find(".videoCon").show(),$(".btn-play").show(),i.currentTime=0,i.play(),i.webkitRequestFullscreen(),i.play()}break;case 2:var e=this.curPage;0==innerIndex?(e.find(".product1").addClass("hide"),e.find(".product2").removeClass("hide"),innerIndex++):(e.data("lock-next",!1),this.next());break;case 4:var e=this.curPage;0==innerIndex?(e.find(".product1").addClass("hide"),e.find(".product2").removeClass("hide"),p5Islider2&&p5Islider2.play(),innerIndex++):(e.data("lock-next",!1),this.next());break;case 6:var e=this.curPage;0==innerIndex?(e.find(".product1").addClass("hide"),e.find(".product2").removeClass("hide"),p7Islider2.play(),innerIndex++):$("#page7 .sharePage").addClass("show")}},onSwipeDown:function(){switch(console.log(this.index),this.index){case 0:var e=this.pages.eq(this.index);3==innerIndex?(e.find(".text2").addClass("show"),e.find(".videoCon,.replay-tips").hide(),e.data("lock-next",!0),innerIndex--):2==innerIndex?(e.find(".text1").addClass("show"),e.find(".text2").removeClass("show"),innerIndex--):1==innerIndex&&(e.find(".text1").removeClass("show"),innerIndex--);break;case 2:var e=this.curPage;0!=innerIndex?(e.find(".product1").removeClass("hide"),e.find(".product2").addClass("hide"),innerIndex=0):(e.data("lock-prev",!1),this.prev());break;case 4:var e=this.curPage;0!=innerIndex?(e.find(".product1").removeClass("hide"),e.find(".product2").addClass("hide"),innerIndex=0):(e.data("lock-prev",!1),this.prev());break;case 6:var e=this.curPage;0!=innerIndex?(e.find(".product1").removeClass("hide"),e.find(".product2").addClass("hide"),p7Islider1.play(),innerIndex=0):(e.data("lock-prev",!1),this.prev())}},onchange:function(){innerIndex=0,$(".btn").removeClass("show");var e=this.pages.eq(this.index);switch(this.index){case 0:e.data("lock-next",!0),$(".snow-box").remove(),clearInterval(_t),e.find(".videoCon,.replay-tips").hide();break;case 1:e.data("lock-next",!1),snowFlow({num:8,url:"../img/p2-feather1.png"});break;case 2:if(e.data("lock-next",!0),e.data("lock-prev",!0),e.find(".product2").addClass("hide"),e.find(".product1").removeClass("hide"),$(".snow-box").remove(),clearInterval(_t),!p3Islider1){var i=[{content:"../img/p3-pic1.png"},{content:"../img/p3-pic2.png"}];p3Islider1=new iSlider({dom:document.querySelector("#page3 .islider1"),dotColor:{main:"#eb5b36",others:"#fff"},data:i,animateType:"default",isAutoplay:!1,duration:2e3,useTime:600,timingFn:"ease",isDebug:!1,isLooping:!0,isVertical:!1,isOverspread:!1})}if(!p3Islider2){var t=[{content:"../img/p3-pic3.png"},{content:"../img/p3-pic4.png"}];p3Islider2=new iSlider({dom:document.querySelector("#page3 .islider2"),dotColor:{main:"#eb5b36",others:"#fff"},data:t,animateType:"default",isAutoplay:!1,duration:2e3,useTime:600,timingFn:"ease",isDebug:!1,isLooping:!0,isVertical:!1,isOverspread:!1})}break;case 3:e.data("lock-next",!1),snowFlow({num:8,url:"../img/p4-petal.png"});break;case 4:if(e.data("lock-next",!0),e.data("lock-prev",!0),e.find(".product2").addClass("hide"),e.find(".product1").removeClass("hide"),$(".snow-box").remove(),clearInterval(_t),!p5Islider2){var t=[{content:"../img/p5-pic2.png"},{content:"../img/p5-pic3.png"}];p5Islider2=new iSlider({dom:document.querySelector("#page5 .islider2"),dotColor:{main:"#eb5b36",others:"#fff"},data:t,animateType:"default",isAutoplay:!1,duration:2e3,useTime:600,timingFn:"ease",isDebug:!1,isLooping:!0,isVertical:!1,isOverspread:!1}),p5Islider2.play()}break;case 5:e.data("lock-next",!1),snowFlow({num:8,url:"../img/p6-star.png"});break;case 6:if(e.data("lock-next",!0),e.data("lock-prev",!0),e.find(".product2").addClass("hide"),e.find(".product1").removeClass("hide"),$(".snow-box").remove(),clearInterval(_t),!p7Islider1){var i=[{content:"../img/p7-pic1.jpg"},{content:"../img/p7-pic2.jpg"}];p7Islider1=new iSlider({dom:document.querySelector("#page7 .islider1"),dotColor:{main:"#eb5b36",others:"#fff"},data:i,animateType:"default",isAutoplay:!1,duration:2e3,useTime:600,timingFn:"ease",isDebug:!1,isLooping:!0,isVertical:!1,isOverspread:!1}),p7Islider1.play()}if(!p7Islider2){var t=[{content:"../img/p7-pic3.jpg"},{content:"../img/p7-pic4.jpg"},{content:"../img/p7-pic5.jpg"},{content:"../img/p7-pic6.jpg"}];p7Islider2=new iSlider({dom:document.querySelector("#page7 .islider2"),dotColor:{main:"#eb5b36",others:"#fff"},data:t,animateType:"default",isAutoplay:!1,duration:2e3,useTime:600,timingFn:"ease",isDebug:!1,isLooping:!0,isVertical:!1,isOverspread:!1}),p7Islider2.play()}break;default:e.data("lock-next",!1),$(".snow-box").remove(),clearInterval(_t)}}}),$("#showDiv").tap(function(){$(this).removeClass("show")}),iSlider.prototype._animateFuncs.fade=function(){function e(e,i,t,n,a,r){e.style.zIndex=1===n?1:0,a=Math.abs(a),1===n?e.style.opacity=1-a/t:e.style.opacity=a/t}return e.effect="opacity",e}(),$("#showLink #close").tap(function(){$("#showLink").removeClass("show")});var innerSlider;$("#showSlider").tap(function(){$("#showSlider").removeClass("show")});